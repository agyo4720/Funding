<!-- 지정 펀딩 등록 -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Let's Funding</title>
    <link rel="stylesheet" href="../../static/css/style.css" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="../../static/css/fundTarget/fundTargetForm.css" th:href="@{/css/fundTarget/fundTargetForm.css}">
</head>
<body>
    <!-- 홈페이지 상단 nav -->
    <header>
        <!-- 로고 -->
        <div class="logo">
            <a href="../main/home.html" th:href="@{/}">Let's Funding</a>
        </div>

        <!-- 메뉴 -->
        <div class="menu">
            <ul>
                <li><a href="../fundTarget/fundTargetList.html" th:href="@{/fundTarget}">지정 펀딩</a></li>
                <li><a href="../fundBoard/fundBoard_list.html" th:href="@{/fundBoard/list}">미지정 펀딩</a></li>
            </ul>
        </div>

        <!-- 검색 -->
        <!-- <div class="search">
            <form action="#" method="get">
                <input class="int_search" type="text">
                <input class="btn_search" type="submit" value="검색">
            </form>
        </div> -->

        <!-- 로그인 -->
        <div class="login">
            <ul>
                <li><a href="../user/loginForm.html" th:href="@{/user/login}">로그인</a></li>
                <li><a href="../user/userCreateForm.html" th:href="@{/user/register}">회원가입</a></li>
            </ul>
        </div>
    </header>

    <section>
		<div>
			<form th:object="${targetForm}" method="post" enctype="multipart/form-data">
				<div>카테고리</div>
				<select name="categorie">
					<option th:each="cate : ${cList}" th:value="${cate.id}" th:text="${cate.categorieName}"></option>
				</select>
				<div>제목</div>
				<input class="subject" type="text" th:field="*{subject}" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				<div>내용</div>
				<input class="content" type="text" th:field="*{content}" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				<div>공연자</div>
				<input class="aertiest" type="text" name="Aertiest" value="" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				<div>장소</div>
				<input class="place" type="text" th:field="*{place}" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				<div>공연 런타임</div>
				<input class="runtime" type=number th:field="*{runtime}" autocomplete="off" placeholder="분 단위 입력">
				<div class="errorList" style="display: none"></div>
				<div>펀딩 기간(오늘부터 시작)</div>
				<input class="fundDurationE" onchage="aaa" type="date" th:min="${nowTime}" th:field="*{fundDurationE}" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				<div>공연 시작일</div>
				<input class="startDate" type="datetime-local" th:field="*{startDate}" value="" autocomplete="off">	
				<div class="errorList" style="display: none" ></div>
				<div>최소 펀딩 금액</div>
				<input class="minFund" type="number" th:field="*{minFund}" value="" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				<div>총 펀딩금액</div>
				<input class="fundAmount" type="number" th:field="*{fundAmount}" value="" autocomplete="off">
				<div class="errorList" style="display: none"></div>
				
				<!-- 대표이미지 선택 -->
				<div>
					<input type="radio" name="imgPath" value="https://cdn.huffingtonpost.kr/news/photo/202101/105466_198431.jpeg"> 
					<img src="https://cdn.huffingtonpost.kr/news/photo/202101/105466_198431.jpeg" alt="이미지1"
					width="100" heigth="100">
					<input type="radio" name="imgPath" value="https://en.pimg.jp/066/591/114/1/66591114.jpg"> 
					<img src="https://en.pimg.jp/066/591/114/1/66591114.jpg" alt="이미지1"
					width="100" heigth="100">
				</div>
				<!-- //대표이미지 선택 -->
				
				<!-- 파일 업로드 -->
				<div>
					<input type="file" multiple="multiple" name="file">
				</div>
				<!-- //파일 업로드 -->
				
				<!-- 이미지 아무것도 선택 안하면 에러 출력 -->
				<div th:if="${#fields.hasAnyErrors()}">
					<div th:each="err : ${#fields.allErrors()}" th:text="${err}"></div>
				</div>
				<!-- //이미지 아무것도 선택 안하면 에러 출력 -->

				<button id="btn" type="submit">만들기</button>
			</form>
            
		</div>
    </section>
    
<script>
	var btn = document.querySelector('#btn');
	var valid = false
	let fundTime
	
	let error = document.querySelectorAll(".errorList")
	
	let subject = document.querySelector('.subject');
	let content = document.querySelector('.content');
	let aertiest = document.querySelector('.aertiest');
	let place = document.querySelector('.place');
	let runtime = document.querySelector('.runtime');
	let fundDurationE = document.querySelector('.fundDurationE');
	let startDate = document.querySelector('.startDate');
	let minFund = document.querySelector('.minFund');
	let fundAmount = document.querySelector('.fundAmount');
	
	
	
	btn.addEventListener('click', function(e) {
		let count = 0;
		for(i=0; i < error.length ; i++){
			if(error[i].style.display == 'none'){
				count += 1
			}
		}
		
		if(count == error.length){
			valid = true
		}
		
		if(valid){
			
		}else{
		    e.preventDefault();
		}
	});
	
	subject.addEventListener('focusout',checkSub)
	content.addEventListener('focusout',checkCon)
	aertiest.addEventListener('focusout',checkAertiest)
	place.addEventListener('focusout',checkPlace)
	runtime.addEventListener('focusout',checkRuntime)
	fundDurationE.addEventListener('focusout',checkFundDurationE)
	startDate.addEventListener('focusout',checkStartDate)
	minFund.addEventListener('focusout',checkMinFund)
	fundAmount.addEventListener('focusout',checkFundAmount)

	
	
	function checkSub(){
		if(subject.value === ""){
			error[0].innerHTML='빈칸이에용.'
			error[0].style.display='block'
		}else{
			error[0].style.display='none'
		}
	}
	function checkCon(){
		if(content.value === ""){
			error[1].innerHTML='빈칸이에용.'
			error[1].style.display='block'
		}else{
			error[1].style.display='none'
		}
	}
	function checkAertiest(){
		if(aertiest.value === ""){
			error[2].innerHTML='빈칸이에용.'
			error[2].style.display='block'
		}else{
			error[2].style.display='none'
		}
	}
	function checkPlace(){
		if(place.value === ""){
			error[3].innerHTML='빈칸이에용.'
			error[3].style.display='block'
		}else{
			error[3].style.display='none'
		}
	}
	function checkRuntime(){
		if(runtime.value === ""){
			error[4].innerHTML='숫자입력해줘용.'
			error[4].style.display='block'
		}else{
			error[4].style.display='none'
		}
	}
	function checkFundDurationE(){
		if(fundDurationE.value === ""){
			error[5].innerHTML='빈칸이에용.'
			error[5].style.display='block'
		}else{
			error[5].style.display='none'
			fundTime = document.querySelector('.fundDurationE').value
			fundTime += 'T00:00'
			startDate.min = fundTime
		}
	}
	function checkStartDate(){
		if(startDate.value === ""){
			error[6].innerHTML='빈칸이에용.'
			error[6].style.display='block'
		}else{
			error[6].style.display='none'
		}
	}
	function checkMinFund(){
		if(minFund.value === ""){
			error[7].innerHTML='빈칸이에용.'
			error[7].style.display='block'
		}else{
			error[7].style.display='none'
		}
	}
	function checkFundAmount(){
		if(fundAmount.value === ""){
			error[8].innerHTML='빈칸이에용.'
			error[8].style.display='block'
		}else{
			error[8].style.display='none'
		}
	}

</script>
</body>
</html>