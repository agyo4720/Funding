<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Let's Funding</title>

	<!-- CSS -->
    <link rel="stylesheet" href="/css/pay/loo/confirm.css">

    <!-- favicon -->
    <link rel="shortcut icon" href="img/favicon/ms-icon-310x310.png" type="image/x-icon" />
</head>
<body>
	<!-- 홈페이지 상단 nav -->
	<header th:replace="/main/nav"></header>

	<div class="wrap">
        <!-- nav -->
        <nav th:replace="/main/usernav"></nav>

		<!-- payinfo -->
		<div class="payinfo">
			<h2>지정 펀딩</h2>
			<table>
				<tr>
					<th>No</th>
					<th>공연</th>
					<th>가격</th>
					<th>상태</th>
					<th>환불</th>
					<th>결제일</th>
					<th>환불 사유</th>
				</tr>
				<tr th:each="list, i : ${sList}">
					<td th:text="${i.count}">No</td>
					<td th:text="${list.fundBoardTarget}">지정공연제목</td>
					<td th:text="|${list.payMoney}원|">가격</td>
					<td th:text="${list.checkin}">상태</td>
					<td>
						<button th:if="${list.fundBoardTarget} != null and ${list.checkin} == 결제완료 " th:onclick="'location.href=\'' + @{/pay/can/tarCancel(paymentKey=${list.payCode})} + '\''" type="submit">환불하기</button>
						<button th:if="${list.fundBoard} != null and ${list.checkin} == 결제완료" th:onclick="'location.href=\'' + @{/pay/can/cancel(paymentKey=${list.payCode})} + '\''" type="submit">미지정환불하기</button>
					</td>
					<td th:text="${#temporals.format(list.payDate, 'yyyy-MM-dd HH:mm')}">결제날짜</td>
					
					<span th:each="clist: ${cList}" hidden>
						<td th:text="${clist.cancelReason}"></td>
					</span>
				</tr>
			</table>
			<!-- 페이징 -->
			<div class="page" th:if="${!sList.isEmpty()}">
				<div th:if="${sList.number > 0}">
					<a th:href="@{|?page=${sList.number-1}|}">
						<i class="fas fa-chevron-left"></i>
					</a>
				</div>
				<div th:each="page : ${#numbers.sequence(0,sList.totalPages-1)}"
					th:if="${sList.number-5 < page and sList.number+5 > page}">
					<a th:classappend="${page == sList.number} ? 'active'" th:text="${page+1}" 
						th:href="@{|?page=${page}|}"></a>
				</div>
				<div th:if="${sList.number < sList.totalPages-1}">
					<a th:href="@{|?page=${sList.number+1}|}">
						<i class="fas fa-chevron-right"></i>
					</a>
				</div>
			</div>
			<!-- //페이징 -->
		
			<table>
				<tr>
					<th>No</th>
					<th>미지정공연제목</th>
					<th>가격</th>
					<th>환불사유</th>
					<th>환불날짜</th>
				</tr>
				<tr th:each="list, i : ${cList}">
					<td th:text="${i.count}">No</td>
					<td th:text="${list.fundBoard}">미지정공연제목</td>
					<td th:text="| ${list.payMoney}원|">가격</td>
					<td th:text="${list.cancelReason}">환불사유</td>
					<td th:text="${#temporals.format(list.canceledAt, 'yyyy-MM-dd HH:mm')}">환불날짜</td>
				</tr>
			</table>
			<!-- 페이징 -->
			<div class="page" th:if="${!cList.isEmpty()}">
				<div th:if="${cList.number > 0}">
					<a th:href="@{|?pagee=${cList.number-1}|}">
						<i class="fas fa-chevron-left"></i>
					</a>
				</div>
				<div th:each="pagee : ${#numbers.sequence(0,cList.totalPages-1)}"
					th:if="${cList.number-3 < pagee and cList.number+3 > pagee}">
					<a th:classappend="${pagee == cList.number} ? 'active'" th:text="${pagee+1}" 
						th:href="@{|?pagee=${pagee}|}"></a>
				</div>
				<div th:if="${cList.number < cList.totalPages-1}">
					<a th:href="@{|?pagee=${cList.number+1}|}">
						<i class="fas fa-chevron-right"></i>
					</a>
				</div>
			</div>
			<!-- //페이징 -->
		</div>
	</div>

</body>
</html>