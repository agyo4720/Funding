<div th:fragment="sidebar"></div>
<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
<link rel="stylesheet" href="css/sidebar/sidebar.css">

<div class="sidebar">
	<div sec:authorize="isAuthenticated()">
		<input hidden class="user" th:value="${#authentication.getPrincipal().getUsername()}"/>
	</div>

	<div>사이드바</div>
	<div>알림</div>
	<div class="alert"></div>
<br>
	<a href="item.url">
		내요용용(item.content)
	</a>
</br>
	<div>현재 펀딩중인 목록</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
	$(document).ready(function(){
		let token = $("meta[name='_csrf']").attr("content");
		let header = $("meta[name='_csrf_header']").attr("content");
		let user = $(".user").val()
		$.ajax({
			url : '/alert/show'
			,data : "user=" + user
			,beforeSend : function(xhr){
				xhr.setRequestHeader(header, token);
			}
			,success : function(result){
				$.each(result, function(index, item){					
					$('.alert').after("<br><a href=\"" + item.url + "\">" + item.content + "</a></br>")
				})
			}
		})
	})

</script>
</div>