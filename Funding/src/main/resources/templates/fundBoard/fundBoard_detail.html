<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>fundBoard_detail</title>
<<<<<<< HEAD
	<!-- CSS -->
	<link rel="stylesheet" href="/css/fundBoard/fundBoard_detail.css">
	
=======

>>>>>>> namgo
    <!-- favicon -->
    <link rel="shortcut icon" href="/img/favicon/ms-icon-310x310.png" type="image/x-icon" />
    
    
</head>
<body>
	<!-- 홈페이지 상단 nav -->
    <header th:replace="/main/nav"></header>

	<section>
<<<<<<< HEAD
		<div class="con">

			<!--섹션1 시작-->
			<div class="left">
				<div class="cate">
					<a href="/fundBoard/list"
					th:text="|미지정 펀딩 > ${fundBoard.categorieName}|"></a>
=======
		<!--섹션1 시작-->
		<div class="left">
			<div class="cate">
				<a href="/fundBoard/list"
				   th:text="${fundBoard.categorieName}|">
				</a>
			</div>
			<h3 th:text="${fundBoard.subject}">공연 이름</h3>
			<div class="image">
				<div th:if="${fundBoard.imgPath != null}">
					<img th:src="${fundBoard.imgPath}" height="300">
>>>>>>> namgo
				</div>
				<h3 th:text="${fundBoard.subject}">공연 이름</h3>
				<div class="image">
					<div th:if="${fundBoard.imgPath != null}">
						<img th:src="${fundBoard.imgPath}" height="300">
					</div>
					<div th:if="${fundBoard.filePath != null}">
						<img th:src="|/fundBoard/img/${fundBoard.id}|" height="300">
					</div>
				</div>
			</div>
<<<<<<< HEAD
		
			<div class="right">
				<div class="view">
					<div class="status">
						<div th:text="${fundBoard.state}">상태</div>
					</div>
				</div>
				<div class="view">
					<label for="writer">작성자</label>
					<p th:text="${fundBoard.fundUser.username}"></p>
				</div>
				<div class="view">
					<label for="startDate">공연일</label>
					<p th:text="${#temporals.format(fundBoard.startDateTime, 'yyyy-MM-dd HH:mm')}">공연일</p>
				</div>
				<div class="view">
					<label for="place">공연장</label>
					<p th:text="${fundBoard.place}"></p>
				</div>
				<div class="view">
					<label for="runtime">공연시간</label>
					<p th:text="|${fundBoard.runtime}분|">공연시간</p>
				</div>
				
				<div class="con_hr_detail">
					<hr/>
				</div>
				
				<div class="view" id="fundCurrent">
					<label for="fundCurrent">현재 펀딩 금액</label>
					<p th:text="|${fundBoard.fundCurrent}원|"></p>
				</div>
				<div class="view" id="fundAmount">
					<label for="fundAmount">총 펀딩 금액</label>
					<p th:text="|${fundBoard.fundAmount}원|"></p>
				</div>
				<div class="view">
					<label for="duration">펀딩기간</label>
					<p th:text="${fundBoard.fundDuration}"></p>
				</div>
				<div class="view">
					<label for="count">현재 인원</label>
					<p th:text="|${fundBoard.currentMember}명|"></p>
				</div>
				<div class="view minFund">
					<label for="minFund">최소 펀딩 금액</label>
					<p th:text="|${fundBoard.minFund}원|"></p>
				</div>
				<div sec:authorize="hasRole('ROLE_USER')">
					<button th:if="${result == true}" class="con_btn" th:onclick="'location.href=\''+ @{/pay/can/cancel(paymentKey=${payCode})} + '\''" type="submit">환불하기</button>
					<button th:if="${result == false}" class="con_btn" th:onclick="'location.href=\''+ @{|/pay/tossPay/${fundBoard.id}|} + '\''">결제하기</button>
				</div>
				<div sec:authorize="!hasRole('ROLE_USER')">					
					<a th:href="@{|/fundArtistList/join/${#authentication.getPrincipal().getUsername()}|}"><button>참여하기</button></a>
				</div>
			</div>
		</div>
		
		<div class="con_hr">
			<hr/>
		</div>

=======
		</div>
	</div>

		<div class="right">
			<div class="view">
				<div class="status">
					<div th:text="${fundBoard.state}">상태</div>
				</div>
			</div>
			<div class="view">
				<label for="writer">작성자</label>
				<p th:text="${fundBoard.fundUser.username}"></p>
			</div>
			<div class="view">
				<label for="startDate">공연일</label>
				<p th:text="${#temporals.format(fundBoard.startDateTime, 'yyyy-MM-dd HH:mm')}">공연일</p>
			</div>
			<div class="view">
				<label for="place">공연장</label>
				<span th:text="${fundBoard.place}"></span>
			</div>
			<div>
				<span>펀딩 기간 : </span>
				<span th:text="${fundBoard.fundDuration}"></span>
			</div>
			<div>
				<span>공연 시작 일자 : </span>
				<span th:text="${#temporals.format(fundBoard.startDateTime, 'yyyy-MM-dd HH:mm')}"></span>
			</div>
			<div>
				<span>공연 시간 : </span>
				<span th:text="|${fundBoard.runtime}분|"></span>
			</div>
			<div>
				<span>1인 최소 펀딩 금액 : </span>
				<span th:text="|${fundBoard.minFund}원|"></span>
			</div>
			<div>
				<span>펀딩 목표 금액 : </span>
				<span th:text="|${fundBoard.fundAmount}원|"></span>
			</div>
			<div>
				<span>펀딩 현재 금액 : </span>
				<span th:text="|${fundBoard.fundCurrent}원|"></span>
			</div>
			<div>
				<span>현재 모집 인원 : </span>
				<span th:text="|${fundBoard.currentMember}명|"></span>
			</div>
			<div>
				<span>펀딩 상태 : </span>
				<span th:text="${fundBoard.state}"></span>
			</div>
		</div>
		<!--섹션1 끝-->
		<div>
			<span>내용 : </span>
			<span th:utext="${fundBoard.content}"></span>
		</div>

		<!--섹션2 시작-->
		<div sec:authorize="hasRole('ROLE_USER')">
			<button th:if="${result == true}" class="con_btn" th:onclick="'location.href=\''+ @{/pay/can/cancel(paymentKey=${payCode})} + '\''" type="submit">환불하기</button>
			<button th:if="${result == false}" class="con_btn" th:onclick="'location.href=\''+ @{|/pay/tossPay/${fundBoard.id}|} + '\''">결제하기</button>
		</div>
		<div sec:authorize="!hasRole('ROLE_USER')">
			<a id="btn1" th:href="@{|/fundArtistList/join/${fundBoard.id}|}"><button>참여하기</button></a>
		</div>
		<!--섹션2 끝-->

		<!--섹션3 끝-->
>>>>>>> namgo
		<div>
			<input hidden class="username" th:value="${#authentication.getPrincipal().getUsername()}">
			<div>현재 참여중인 아티스트</div>
			<div th:each="fundArtistList : ${fundArtistList}">
				<span th:text="${fundArtistList.fundArtist.nickname}"></span>
			<input hidden class="fundArtistList" th:value="${fundArtistList.fundArtist.username}">
				<a sec:authorize="hasRole('ROLE_USER')" th:href="@{|/fundArtistList/score/${fundArtistList.id}|}">투표하기</a>
				<span th:text="|${fundArtistList.fundUserList.size()}개|"></span>
			</div>
		</div>
<<<<<<< HEAD

		<div class="con_hr">
			<hr/>
		</div>

		<div class="con_text">
			<div class="title">
                <h2>콘서트 내용</h2>
			</div>

			<div th:utext="${fundBoard.content}">설명</div>
		</div>

		<div class="con_hr">
            <hr/>
        </div>
		
		<!-- 댓글 -->
		<div class="con_comment">
			<div class="tutke">
				<h2>댓글</h2>
			</div>

			<div class="cmt_form">
				<form th:action="@{|/answer/fundBoard/create/${fundBoard.id}|}" method="GET">
					<textarea class="int_cmt" name="content" placeholder="내용을 입력하세요."></textarea>
					<button class="btn_cmt" type="submit">등록</button>
				</form>
			</div>
			
			<div class="cmt_view" th:each="answer : ${answerList}">
				<div class="cmt">
					<div class="cmt_head">
						<p class="id">아이디</p>
						<p class="time" th:text="${#temporals.format(answer.createDate, 'MM-dd HH:mm:ss')}">댓글 시간</p>
						<a class="cmt_delete" th:href="@{|/answer/delete/${answer.id}?location=board&id=${fundBoard.id}|}">삭제</a>
					</div>
					<p th:text="${answer.content}">댓글 내용</p>
				</div>
			</div>
		</div>
	</section>
=======
		<!--섹션3 끝-->

		<!--섹션4 시작-->
		<div class="section2">
			<div th:each="answer : ${answerList}">
				<div th:text="${answer.content}">댓글 내용</div>
				<div th:text="${#temporals.format(answer.createDate, 'MM-dd HH:mm:ss')}">댓글 시간</div>
				<a class="cmt_delete" th:href="@{|/answer/delete/${answer.id}?location=board&id=${fundBoard.id}|}">삭제</a>
			</div>
		</div>
		<!--섹션4 끝-->

		<!--섹션5 시작-->
		<div class="section3">
			<form th:action="@{|/answer/fundBoard/create/${fundBoard.id}|}" method="GET">
				<input type="text" name="content" value="">
				<button type="submit">댓글 달기</button>
			</form>
		</div>
		<!--섹션5 끝-->
		
	<script>

		let username = document.querySelector('.username').value;
		let fundArtistList = document.querySelectorAll('.fundArtistList');
		let btn = document.querySelector('#btn1');

		btn.addEventListener('click', check);

		function check(){

			console.log('실행되었습니다!');

			let bol = true;

			fundArtistList.forEach(function(e){

				if(e.value == username){
					bol = false;
				}
			})

			if(bol == true){
				alert("참여 완료되었습니다.");
			}else{
				alert("이미 존재합니다.");
			}
		
		}
		
	</script>
	
		
>>>>>>> namgo
</body>
</html>
